package qa.yblapp.base;

import io.appium.java_client.android.AndroidDriver;
import io.appium.java_client.android.options.UiAutomator2Options;
import io.appium.java_client.service.local.AppiumDriverLocalService;
import io.appium.java_client.service.local.AppiumServiceBuilder;
import io.appium.java_client.AppiumBy;

import org.openqa.selenium.WebElement;
//import io.appium.java_client.MobileElement;
import org.openqa.selenium.remote.DesiredCapabilities;
import org.openqa.selenium.support.ui.ExpectedConditions;
import org.openqa.selenium.support.ui.FluentWait;
import org.openqa.selenium.support.ui.WebDriverWait;

import java.net.MalformedURLException;
import java.net.URL;
import java.time.Duration;

import qa.yblapp.logging.*;
import java.util.Properties;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;

public class Base {
	public static AndroidDriver driver;
	public Logging log;
	public WebDriverWait wait;
	public static Properties prop;
	
	public Base() {
		log = new Logging();
		try {
			 prop = new Properties();
			String File = "E:\\Rakesh\\Automation\\New folder\\Automation\\YBL\\Practice\\20102\\qa.yblapp\\src\\main\\java\\qa\\yblapp\\config\\config.properties";
			FileInputStream file = new FileInputStream(File);
			try {
				prop.load(file);
			} catch (IOException e) {
				// TODO Auto-generated catch block
				log.Logerror("Base.Base().FileInputStream.prop.load(file)"+"\n"+e);
			}
		} catch (FileNotFoundException e) {
			log.Logerror("Base.Base().FileInputStream"+"\n"+e);
		}
	}

	
//	public static void waitForElement(AndroidDriver driver, WebElement element) {
//	    FluentWait<AndroidDriver> wait = new FluentWait(driver)
//	            .withTimeout(Duration.ofSeconds(30))
//	            .pollingEvery(Duration.ofMillis(500));
//	    wait.until(ExpectedConditions.elementToBeClickable(element));
//	}
	
	public void Initialization() throws MalformedURLException {
		log = new Logging();
		prop = new Properties();
		AppiumDriverLocalService service = new AppiumServiceBuilder()
  				.withAppiumJS(new File(prop.getProperty("mainjs")))
  				.withIPAddress(prop.getProperty("ip"))
  				.usingPort(4732)
  				.withTimeout(Duration.ofMillis(50000))
  				.build();
  		service.start();
  		log.Loginfo("Services Started-----------");
  		
  		System.out.println("Getting into UiAutomator2Options");
  		UiAutomator2Options options = new UiAutomator2Options();
  		options.setDeviceName("samsung SM-T295");
  		System.out.println("Getting DeviceName");
  		options.setApp("E:\\Rakesh\\Automation\\New folder\\Automation\\YBL\\Practice\\apk\\yblmfi\\GanasevaMFI_YBL (2).apk");
  		System.out.println("Seeting the App");
  		//Android Driver
  		AndroidDriver driver = new AndroidDriver(new URL("http://127.0.0.1:4723/"), options);
  		driver.manage().timeouts().implicitlyWait(Duration.ofSeconds(40));
	}

}
